//>>built
/*
 dojo-fmeserver-portal
 More information here: https://github.com/gavlepeter/dojo-fmeserver-portal
 @version 1.0
 @author Peter JÃ¤derkvist <peter.jaderkvist@gavle.se>
 @license See https://github.com/gavlepeter/dojo-fmeserver-portal/blob/master/License.md
*/
require({cache:{"app/FMEPortal/Utils":function(){define(["dojo/dom-style"],function(n){return{show:function(a){a&&n.set(a,"display","block")},hide:function(a){a&&n.set(a,"display","none")},toggle:function(a){a&&("none"===n.get(a,"display")?n.set(a,"display","block"):n.set(a,"display","none"))}}})},"app/FMEPortal/Login":function(){define("dojo/_base/declare dojo/_base/lang dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/Evented dojo/on dojo/text!./templates/login.html dojo/keys dojo/i18n!./nls/resources dijit/layout/TabContainer dijit/layout/ContentPane dijit/form/ValidationTextBox dijit/form/Form dijit/form/Button dijit/form/CheckBox dijit/layout/TabController".split(" "),
function(n,a,c,k,t,u,v,l,w,r){return n("FmePortal-Login",[c,k,t,u],{templateString:l,widgetsInTemplate:!0,constructor:function(a){this.options=a;this.nls=r},postCreate:function(){this.inherited(arguments);this._adminMode.set("checked",this.options.settings.fme.server.adminMode);this.own(v(this._login,"click",a.hitch(this,function(){this._loginStatus.innerHTML="";this._fmeLoginForm.validate()&&this.emit("login",this._fmeLoginForm.get("value"),this._getSettings())})),v(this._tokenLogin,"click",a.hitch(this,
function(){this._tokenStatus.innerHTML="";this._fmeTokenForm.validate()&&this.emit("tokenLogin",this._fmeTokenForm.get("value"),this._getSettings())})),v(this._fmeLoginForm,"keydown",a.hitch(this,function(a){var c=!1;void 0!==a.keyCode&&a.keyCode===w.ENTER&&(this._fmeLoginForm.validate()&&this.emit("login",this._fmeLoginForm.getValues()),c=!0);c&&a.preventDefault()})))},startup:function(){this.inherited(arguments);this._tabContainer.startup();this.options.settings.fme.server.token.showTokenTab||this._tokenTab.controlButton.set("disabled",
!0);this.options.settings.fme.server.showSettingsTab||this._settingsTab.controlButton.set("disabled",!0)},setTokenStatus:function(a){this._tokenStatus.innerHTML=a},setLoginStatus:function(a){this._loginStatus.innerHTML=a},_getSettings:function(){return{adminMode:this._adminMode.get("checked"),url:this._serverUrl.get("value")}},destroy:function(){this.inherited(arguments)}})})},"app/FMEPortal/nls/resources":function(){define({root:{Login:{Tabs:{Credentials:{Title:"Sign in",Info:"Sign in to access FME-server",
Username:"Username",Password:"Password"},Token:{Title:"Token sign in",Info:"Enter token to sign in to FME-server",Token:"Valid token"},Settings:{Title:"Settings",Info:"Setup FME-server information",ServerUrl:"FME-server URL",AdminMode:{Info:"Start the portal in admin mode to automatically retrieve all repositorys and workspaces the active user has access too.",Label:"Use admin mode"}}},SignedInAs:"You are signed in as ",TokenSignIn:"You are signed in using a token",Button:"Sign in",ButtonSignout:"Sign out",
Messages:{Expired:"Your session expired, sign in again!",BadLogin:"Bad login, wrong username or password?",NoAccess:"Cant access the FME-server at {url}",NoPermission:"You don't have permission to access this FME-server.",NoWorkspacePermission:"You don't have permission to access this workspace.",BadToken:"Invalid token or server settings."}},Widget:{About:"About",Step1:{Title:"Step 1: Draw clipping area"},Step2:{Title:"Step 2: Select workspace, set parameters and run!",LoadingParams:"Loading parameters...",
LoadingContent:"Loading content...",ChooseWorkspace:"Choose Workspace",Repository:"Repository",Workspace:"Workspace"},Step3:{Title:"Step 3: Results",LoadingResult:"Waiting for workspace results...",ClearResult:"Clear",NoTranslationResults:"No translation results yet..."}},GenerateForms:{NumberTextBox:{IntegerMessage:"The value must be integer",NumberMessage:"The value must be a number",MinMaxMessage:"Input a number between {min} and {max}",MinMaxPlaceholder:"min {min}, max {max}"},ColorPicker:{SelectColor:"Select a color"},
Results:{Success:"Translation Successful",Download:"Download results...",Count:"written features",ViewStreamingResult:"View data streaming results"},ButtonOrder:"Run",Error:{ServiceType:"Service type {type} is not supported.",Unknown:"Unknown error!","No output dataset":"No output dataset was produced by FME transformation","Fatal error":"A fatal error occured","Missing geometry":"A geometry is missing","Transformation failed":"The transformation failed","Unauthorized request":"Unauthorized request",
"No transformation result":"No transformation result"}},FileUpload:{AddFiles:"Add file(s)",SelectFiles:"Select file(s)",SelectTranslationFiles:"Select file(s) for the translation",Button:"Upload file(s)",Uploading:"Uploading file(s)...",NoFiles:"No uploaded file(s)",FileList:{Name:"Name",Size:"Size",Type:"Type"}},WorkspaceInfo:{ButtonLabel:"Workspace Information",Label:"Workspace information about",Title:"Title",Build:"FME Build number",Filesize:"File Size",Category:"Category",Description:"Description",
History:"History",LastSaveBuild:"FME last save build number",LastSaveDate:"FME last save date",Resources:"File resources",Services:"Registered services",Type:"Type of resource",Usage:"Usage info"},Status:{Title:"FME-server status",RunningJobs:"Running jobs",NoRunningJobs:"No running jobs.",QueuedJobs:"Queued jobs",NoQueuedJobs:"No queued jobs."},Toolbar:{NoMap:"This portal is not connected to a map.",Message:"Select a workspace to enable drawing tools.",Area:"The drawing cover {area} hectares.",Edit:"Click somewhere outside the edited geometry to save it.",
InputExtent:{Title:"Input extent coordinates",Input:"Input",xmin:"x-min",ymin:"y-min",xmax:"x-max",ymax:"y-max",Validation:{Coordinates:"Input valid coordinates"},ButtonDraw:"Draw extent",InvalidCoordinates:"Invalid coordinates!"},Buffer:{UseBuffer:"Set",SetBuffer:"Set buffer"}}},sv:!0})},"app/FMEPortal/nls/sv/resources":function(){define({Login:{Tabs:{Credentials:{Title:"Logga in",Info:"Logga in f\u00f6r att komma \u00e5t FME-server",Username:"Anv\u00e4ndarnamn",Password:"L\u00f6senord"},Token:{Title:"Logga in med token",
Info:"Ange token f\u00f6r att logga in till FME-server",Token:"Giltig token"},Settings:{Title:"Inst\u00e4llningar",Info:"St\u00e4ll in FME-server info",ServerUrl:"FME-server url",AdminMode:{Info:"Starta i administrat\u00f6rsl\u00e4ge f\u00f6r att automatiskt h\u00e4mta alla kataloger och skript som den aktiva anv\u00e4ndaren har \u00e5tkomst till.",Label:"Anv\u00e4nd administrat\u00f6rsl\u00e4ge"}}},SignedInAs:"Du \u00e4r inloggad som ",TokenSignIn:"Du har loggat med en token",Button:"Logga in",ButtonSignout:"Logga ut",
Messages:{Expired:"Din session har g\u00e5tt ut, logga in p\u00e5 nytt!",BadLogin:"Felaktig inloggning, fel anv\u00e4ndarnamn eller l\u00f6senord?",NoAccess:"Kan inte komma FME-servern p\u00e5 {url}",NoPermission:"Du har ingen beh\u00f6righet p\u00e5 denna FME-server.",NoWorkspacePermission:"Du har inte beh\u00f6righet till detta FME-skript.",BadToken:"Felaktig token eller server-inst\u00e4llning."}},Widget:{About:"Om",Step1:{Title:"Steg 1: Rita en klippyta"},Step2:{Title:"Steg 2: V\u00e4lj FME-skript, st\u00e4ll in parametrar och k\u00f6r!",
LoadingParams:"Laddar formul\u00e4r...",LoadingContent:"Laddar inneh\u00e5ll...",ChooseWorkspace:"V\u00e4lj FME-skript",Repository:"Katalog",Workspace:"FME-skript"},Step3:{Title:"Steg 3: Resultat",LoadingResult:"Inv\u00e4ntar resultat...",ClearResult:"Rensa",NoTranslationResults:"Inga resultat \u00e4nnu..."}},GenerateForms:{NumberTextBox:{IntegerMessage:"V\u00e4rdet m\u00e5ste vara ett heltal.",NumberMessage:"V\u00e4rdet m\u00e5ste vara ett tal.",MinMaxMessage:"Ange ett v\u00e4rde mellan {min} och {max}",
MinMaxPlaceholder:"min {min}, max {max}"},ColorPicker:{SelectColor:"V\u00e4lj en f\u00e4rg"},Results:{Success:"K\u00f6rningen lyckades!",Download:"Ladda ned resultatet",Count:"Skrivna objekt/poster",ViewStreamingResult:"Visa resultat fr\u00e5n data streaming-tj\u00e4nsten"},ButtonOrder:"K\u00f6r",Error:{ServiceType:"Servicetypen {type} st\u00f6ds inte.",Unknown:"Ok\u00e4nd fel!","No output dataset":"Inget utdata skapades vid FME-k\u00f6rningen.","Fatal error":"Ett allvarligt fel intr\u00e4ffade",
"Missing geometry":"En geometri saknas","Transformation failed":"N\u00e5got gick fel vid k\u00f6rningen","Unauthorized request":"Obeh\u00f6rigt anrop","No transformation result":"K\u00f6rningen gav inget resultat."}},FileUpload:{AddFiles:"L\u00e4gg till fil(er)",SelectFiles:"V\u00e4lj fil(er)",SelectTranslationFiles:"V\u00e4lj fil(er) till FME-skriptet",Button:"Ladda upp fil(er)",Uploading:"Laddar upp fil(er)...",NoFiles:"Inga uppladdade fil(er)",FileList:{Name:"Namn",Size:"Storlek",Type:"Typ"}},
WorkspaceInfo:{ButtonLabel:"Information om FME-skriptet",Label:"Information om FME-skriptet ",Title:"Titel",Build:"FME Build version",Filesize:"Filstorlek",Category:"Kategori",Description:"Beskrivning",History:"Historik",LastSaveBuild:"Senast sparad med FME build version",LastSaveDate:"Senast sparad",Resources:"Filresurser",Services:"Registrerade tj\u00e4nster",Type:"Typ av resurs",Usage:"Information om anv\u00e4ndning"},Status:{Title:"FME-server status",RunningJobs:"P\u00e5g\u00e5ende jobb",NoRunningJobs:"Inga p\u00e5g\u00e5ende jobb.",
QueuedJobs:"Jobb i k\u00f6",NoQueuedJobs:"Inga jobb i k\u00f6."},Toolbar:{NoMap:"Portalen \u00e4r inte kopplad till en karta.",Message:"V\u00e4lj ett FME-skript f\u00f6r att aktivera ritverktyg.",Area:"Ritningen t\u00e4cker {area} hektar.",Edit:"Klicka utanf\u00f6r den \u00e4ndrade ytan f\u00f6r att spara.",InputExtent:{Title:"Ange utbredningskoordinater",Input:"Ange",xmin:"x-min",ymin:"y-min",xmax:"x-max",ymax:"y-max",Validation:{Coordinates:"Ange giltiga koordinater"},ButtonDraw:"Rita utbredning",
InvalidCoordinates:"Ogiltiga koordinater!"},Buffer:{UseBuffer:"Ange",SetBuffer:"Ange buffert"}}})},"app/FMEPortal/WorkspaceInfo":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/Evented dojo/text!./templates/workspace-info.html dojo/i18n!./nls/resources".split(" "),function(n,a,c,k,t,u,v,l,w){return n("FmePortal-Workspace-Info",[k,t,u,v],{templateString:l,widgetsInTemplate:!0,baseClass:"fmeportal",options:{},
constructor:function(k){this.options=a.mixin(this.options,k);this.nls=w;k=this.options.history.split(",");this.options.history="";c.forEach(k,a.hitch(this,function(a,c){this.options.history+=a+" ";0===(c+1)%3&&(this.options.history+="\x3cbr/\x3e")}));var l="";c.forEach(this.options.resources,a.hitch(this,function(a){l+=a.name+"\x3cbr/\x3e"}));this.options.resources=l;var m="";c.forEach(this.options.services,a.hitch(this,function(a){m+=a.displayName+"\x3cbr/\x3e"}));this.options.services=m},postCreate:function(){this.inherited(arguments)},
destroy:function(){this.inherited(arguments)}})})},"app/FMEPortal/GenerateForms":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/Evented dojo/on dojo/text!./templates/workspace-form.html dojo/text!./templates/result.html dojo/dom-style dojo/dom-construct dojo/dom dojo/topic dijit/registry dojo/data/ObjectStore dojo/store/Memory ./Utils dojo/i18n!./nls/resources ./FileUpload dijit/form/TextBox dijit/form/Select dijit/form/Form dijit/form/Button dijit/form/CheckBox dijit/form/NumberTextBox dijit/form/ValidationTextBox dijit/form/Textarea dojox/form/CheckedMultiSelect dijit/form/DropDownButton esri/dijit/ColorPicker esri/Color".split(" "),
function(n,a,c,k,t,u,v,l,w,r,x,m,y,h,z,C,E,A,F,B,D,q,J,K,H,I,G,g,f,e,p,L){return n("FmePortal-GenerateForms",[k,t,u,v],{templateString:w,widgetsInTemplate:!0,constructor:function(b){this.options=a.mixin({},this.options,b.options);this.nls=F;this._parameters=b.parameters;this._repository=b.ws.repo;this._workspace=b.ws.id;this._type=b.ws.service;this._startGeometry=b.geometry||null;this._label=b.ws.label;b.ws&&b.ws.description&&b.ws.label?(this.title=b.ws.label+" \x3ci class\x3d'material-icons'\x3e\x26#xE887;\x3c/i\x3e",
this.description=b.ws.description):(this.title=b.ws.id,this.description=null);this._addTopics()},_addTopics:function(){this.own(h.subscribe("FMEPortal/disableOrderButton",a.hitch(this,function(){this._order&&this._order.set("disabled",!0)})),h.subscribe("FMEPortal/enableOrderButton",a.hitch(this,function(){this._order&&this._order.set("disabled",!1)})),h.subscribe("FMEPortal/orderStart",a.hitch(this,function(){this._order&&this._order.set("disabled",!0)})),h.subscribe("FMEPortal/orderComplete",a.hitch(this,
function(){this._order&&this._order.set("disabled",!1)})))},postCreate:function(){this.inherited(arguments);this._activeFileUploads=[];c.forEach(this._parameters,a.hitch(this,function(b){var d=[this.options.settings.fme.geometry.parameter];this.options.settings.adminMode||d.push("FME_SERVER_DEST_DIR");d=-1!==d.indexOf(b.name);switch(b.type){case "NOVALUE":this._generateTextBox(b,d);break;case "LOOKUP_CHOICE":this._generateSelect(b,d);break;case "CHOICE":this._generateCheckBox(b,d);break;case "TEXT":this._generateTextBox(b,
d);break;case "PASSWORD":this._generatePasswordTextBox(b,d);break;case "FLOAT":this._generateNumberTextBox(b,d,"float");break;case "INTEGER":this._generateNumberTextBox(b,d,"integer");break;case "RANGE_SLIDER":this._generateNumberTextBox(b,d,"minmax");break;case "FILE_OR_URL":this._generateUpload(b,d);break;case "MULTIFILE":this._generateUpload(b,d);break;case "FILENAME_MUSTEXIST":this._generateTextBox(b,d,!0);break;case "FILENAME":this._generateTextBox(b,d,!0);break;case "TEXT_EDIT":this._generateTextarea(b,
d);break;case "LOOKUP_LISTBOX":this._generateMultiSelect(b,d);break;case "LISTBOX":this._generateMultiSelect(b,d);break;case "COLOR_PICK":this._generateColorPicker(b,d);break;default:this._generateTextBox(b,d)}}));this.own(l(this._order,"click",a.hitch(this,this._runOrder)));this.title&&this.description&&(A.show(this._title),l(this._title,"click",a.hitch(this,function(){A.toggle(this._description)})))},addServiceSelect:function(b){var d=[];c.forEach(b.services,function(b){d.push({label:b.displayName,
value:b.name})});A.show(this._serviceType);this._serviceSelect=(new q({id:"fmeportal-service-select",name:"service",options:d,style:"width:185px"},this._serviceType)).startup()},setGeometry:function(b){this._geometryBox&&b&&0<b.length?this._geometryBox.set("value",b):this._geometryBox&&this._geometryBox.set("value","")},_runOrder:function(){if(this._form.validate()){h.publish("FMEPortal/orderStart");var b=this._form.get("value"),d=this._processValuesToString(b),b=this._processValuesToObject(b);z.byId("fmeportal-service-select")&&
(this._type=z.byId("fmeportal-service-select").get("value"));if(this._activeFileUploads&&0<this._activeFileUploads.length){var d={paramnames:[],files:[],params:d,service:this._type},e=[];c.forEach(this._activeFileUploads,a.hitch(this,function(b){var a=b.getValues();a&&a.files&&(d.paramnames.push(b.get("paramname")),d.files.push(a.files),e.push(b.get("path")));if(a&&a.fileUrl){var c={};c[b.get("paramname")]=a.fileUrl;b=this._processValuesToString(c);d.params+=b}}));switch(this._type){case "fmedatadownload":FMEServer.runWorkspaceWithData(this._repository,
this._workspace,e,d,a.hitch(this,this._resultDataDownload));break;case "fmejobsubmitter":FMEServer.runWorkspaceWithData(this._repository,this._workspace,e,d,a.hitch(this,this._resultJobSubmitter));break;case "fmedatastreaming":FMEServer.runWorkspaceWithData(this._repository,this._workspace,e,d,a.hitch(this,this._resultDataStreaming));break;default:b={resultClass:"error",date:this.nls.GenerateForms.Error["No transformation result"],message:a.replace(this.nls.GenerateForms.Error.ServiceType,{type:this._type}),
workspace:this._label||this._workspace,icon:"\x26#xE86C;"},h.publish("FMEPortal/orderComplete",m.toDom(a.replace(r,b)))}}else switch(this._type){case "fmedatadownload":FMEServer.runDataDownload(this._repository,this._workspace,d,a.hitch(this,this._resultDataDownload));break;case "fmejobsubmitter":FMEServer.submitSyncJob(this._repository,this._workspace,b,a.hitch(this,this._resultJobSubmitter));break;case "fmedatastreaming":FMEServer.runDataStreaming(this._repository,this._workspace,d,a.hitch(this,
this._resultDataStreaming));break;default:b={resultClass:"error",date:this.nls.GenerateForms.Error["No transformation result"],message:a.replace(this.nls.GenerateForms.Error.ServiceType,{type:this._type}),workspace:this._label||this._workspace,icon:"\x26#xE86C;"},h.publish("FMEPortal/orderComplete",m.toDom(a.replace(r,b)))}}},_resultDataDownload:function(b){var d={resultClass:"success",date:null,message:null,workspace:this._label||this._workspace,icon:"\x26#xE86C;"};b&&b.serviceResponse&&b.serviceResponse.statusInfo&&
"success"===b.serviceResponse.statusInfo.status?(d.date=b.serviceResponse.fmeTransformationResult.fmeServerResponse.timeFinished,d.message=b.serviceResponse.url?"\x3ci class\x3d'material-icons'\x3e\x26#xE2C4;\x3c/i\x3e\x3ca href\x3d'"+b.serviceResponse.url+"'\x3e"+this.nls.GenerateForms.Results.Download+"\x3c/a\x3e":this._checkSuccessMessage(b.statusMessage)+", "+b.numFeaturesOutput+" "+this.nls.GenerateForms.Results.Count):(d.resultClass="error",d.date=b.serviceResponse.fmeTransformationResult?b.serviceResponse.fmeTransformationResult.fmeServerResponse.timeFinished:
this.nls.GenerateForms.Error["No transformation result"],d.message=this._checkErrorMessage(b.serviceResponse.statusInfo.message),d.icon="\x26#xE000;");h.publish("FMEPortal/orderComplete",m.toDom(a.replace(r,d)),b)},_resultJobSubmitter:function(b){var d={resultClass:"success",date:null,message:null,workspace:this._label||this._workspace,icon:"\x26#xE86C;"};if(b&&b.serviceResponse&&b.serviceResponse.statusInfo&&b.serviceResponse.statusInfo&&"success"===b.serviceResponse.statusInfo.status){var e=b.serviceResponse.fmeTransformationResult.fmeEngineResponse;
d.date=b.serviceResponse.fmeTransformationResult.fmeServerResponse.timeFinished;d.message=this._checkSuccessMessage(e.statusMessage)+", "+e.numFeaturesOutput+" "+this.nls.GenerateForms.Results.Count}else b&&"SUCCESS"===b.status?(d.date=b.timeFinished,d.message=this._checkSuccessMessage(b.statusMessage)+", "+b.numFeaturesOutput+" "+this.nls.GenerateForms.Results.Count):(d.resultClass="error",b.timeFinished?(d.date=b.timeFinished?b.timeFinished:this.nls.GenerateForms.Error["No transformation result"],
d.message=this._checkErrorMessage(b.statusMessage||b.serviceResponse.statusInfo.message)):(d.date=b.serviceResponse.fmeTransformationResult?b.serviceResponse.fmeTransformationResult.fmeServerResponse.timeFinished:this.nls.GenerateForms.Error["No transformation result"],d.message=this._checkErrorMessage(b.serviceResponse.statusInfo.message)),d.icon="\x26#xE000;");h.publish("FMEPortal/orderComplete",m.toDom(a.replace(r,d)),b)},_streamingCount:0,_resultDataStreaming:function(b){var d={resultClass:"success",
date:null,message:null,workspace:this._label||this._workspace,icon:"\x26#xE86C;"};b?(b="object"===typeof b?"\x3cpre style\x3d'width:600px;'\x3e"+JSON.stringify(b,null,4)+"\x3c/pre\x3e":"\x3cpre style\x3d'width:600px;'\x3e"+this._escapeHTML(b)+"\x3c/pre\x3e",this._streamingCount+=1,d.date=(new Date).toISOString(),d.message=this.nls.GenerateForms.Results.Success+" \x3ca style\x3d'cursor:pointer;' id\x3d'"+this.id+"-streaming-"+this._streamingCount+"'\x3e\x3ci class\x3d'material-icons'\x3e\x26#xE8F4;\x3c/i\x3e "+
this.nls.GenerateForms.Results.ViewStreamingResult+"\x3c/a\x3e"):(d.resultClass="error",d.message=this.nls.GenerateForms.Error["No output dataset"],d.icon="\x26#xE000;");h.publish("FMEPortal/orderComplete",m.toDom(a.replace(r,d)));b&&l(y.byId(this.id+"-streaming-"+this._streamingCount),"click",function(){h.publish("FMEPortal/alert","FME-portal Data Streaming",b)})},_escapeHTML:function(b){return b.replace(/&/g,"\x26amp;").replace(/</g,"\x26lt;").replace(/>/g,"\x26gt;")},_checkErrorMessage:function(b){if(b){var d=
b;this._isNumber(b.slice(-5,-2))&&this.options.settings.fme.customErrors?d=this.options.settings.fme.customErrors[b.slice(-5,-2)]||this.nls.GenerateForms.Error.Unknown:(d=d.contains("No output dataset was produced by FME transformation")?this.nls.GenerateForms.Error["No output dataset"]:d,d=d.contains("A fatal error has occurred")?this.nls.GenerateForms.Error["Fatal error"]:d,d=d.contains("Parameter '"+this.options.settings.fme.geometry.parameter+"' must be given a value.")?this.nls.GenerateForms.Error["Missing geometry"]:
d,d=d.contains("FME Server transformation failed: ")?d.replace("FME Server transformation failed: ",""):d,d=d.contains("Unauthorized request")?this.nls.GenerateForms.Error["Unauthorized request"]:d,d.contains("Authentication failed")&&h.publish("FMEPortal/showLogin"));return d}},_checkSuccessMessage:function(b){if(b)return b=b.contains("Translation Successful")?this.nls.GenerateForms.Results.Success:b},_isNumber:function(b){return!isNaN(parseFloat(b))&&isFinite(b)},_processValuesToString:function(b){var d=
"",a,e,p,g,f;for(f in b)b.hasOwnProperty(f)&&(a=b[f],"string"===typeof a?(p=!1,g=this._form.getChildren(),c.forEach(g,function(b){b.name===f&&b.isEditText&&(p=!0)}),d=p?d+(f+"\x3d"+encodeURIComponent(this._convertMultilineText(f,a))+"\x26"):d+(f+"\x3d"+encodeURIComponent(a)+"\x26")):"number"===typeof a?isNaN(a)||(d+=f+"\x3d"+a+"\x26"):(e=!1,g=this._form.getChildren(),c.forEach(g,function(b){b.name===f&&b.isCheckbox&&(e=!0)}),d=e?d+(0===a.length?f+"\x3dNo\x26":f+"\x3dYes\x26"):d+(f+"\x3d"+encodeURIComponent(a.toString())+
"\x26")));return d},_processValuesToObject:function(b){var d={publishedParameters:[]},a,e,p,g,f;for(e in b)b.hasOwnProperty(e)&&(a=b[e],"string"===typeof a?(f=!1,g=this._form.getChildren(),c.forEach(g,function(b){b.name===e&&b.isEditText&&(f=!0)}),f?d.publishedParameters.push({name:e,value:this._convertMultilineText(e,a)}):d.publishedParameters.push({name:e,value:a})):"number"===typeof a?isNaN(a)||d.publishedParameters.push({name:e,value:a}):(p=!1,g=this._form.getChildren(),c.forEach(g,function(b){b.name===
e&&b.isCheckbox&&(p=!0)}),p?d.publishedParameters.push({name:e,value:0===a.length?"No":"Yes"}):d.publishedParameters.push({name:e,value:a})));return d},_generateSelect:function(b,d){var a=[];c.forEach(b.listOptions,function(d){d={label:d.caption,value:d.value};d.value===b.defaultValue&&(d.selected=!0);a.push(d)});var e=this._generateContainer(b,d);(new q({name:b.name,options:a,style:"width:185px"})).placeAt(e,"last").startup()},_generateCheckBox:function(b,d){if("Yes"===b.defaultValue||"No"===b.defaultValue){var a=
this._generateContainer(b,d),a=(new H({name:b.name,checked:"Yes"===b.defaultValue})).placeAt(a,"last");a.startup();a.set("isCheckbox",!0)}},_generateTextBox:function(b,d,a){d=this._generateContainer(b,d);b.name===this.options.settings.fme.geometry.parameter?(this._geometryBox=b=new D({name:b.name,value:this._startGeometry||"",style:"width:185px"}),h.publish("FMEPortal/showGeometryTools")):b=new D({name:b.name,value:b.defaultValue,style:"width:185px"});b.placeAt(d,"last");a&&b.set("disabled",!0)},
_generateTextarea:function(b,d){if(b.name===this.options.settings.fme.geometry.parameter)this._generateTextBox(b,d);else{var a=this._generateContainer(b,d),e=this._convertMultilineText(null,b.defaultValue,!0),e=new g({name:b.name,value:e,style:"width:185px"});e.startup();e.set("isEditText",!0);e.placeAt(a,"last")}},_generatePasswordTextBox:function(b,d){var a=this._generateContainer(b,d);(new G({type:"password",name:b.name,value:b.defaultValue,style:"width:185px"})).placeAt(a,"last")},_generateNumberTextBox:function(b,
d,e){d=this._generateContainer(b,d);var p={name:b.name,value:Number(b.defaultValue),style:"width:185px"};"integer"===e&&(p.constraints={places:0},p.invalidMessage=this.nls.GenerateForms.NumberTextBox.IntegerMessage);"float"===e&&(p.invalidMessage=this.nls.GenerateForms.NumberTextBox.NumberMessage);"minmax"===e&&(p.constraints={min:b.minimum,max:b.maximum},p.invalidMessage=a.replace(this.nls.GenerateForms.NumberTextBox.MinMaxMessage,{min:b.minimum,max:b.maximum}),p.placeholder=a.replace(this.nls.GenerateForms.NumberTextBox.MinMaxPlaceholder,
{min:b.minimum,max:b.maximum}));(new I(p)).placeAt(d,"last")},_generateMultiSelect:function(b,d){var a=this._generateContainer(b,d),e=[];c.forEach(b.listOptions,function(b){e.push({id:b.value,label:b.caption})});var p=new C({objectStore:new E({data:e})});(new f({name:b.name,store:p,style:"width:185px;border:0;",multiple:!0})).placeAt(a,"last").set("value",b.defaultValue)},_generateColorPicker:function(b,d){var a=this._generateContainer(b,d),c=b.defaultValue.split(","),g;3===c.length&&(g=new L([parseInt(255*
c[0]),parseInt(255*c[1]),parseInt(255*c[2])]),x.set(a,"background","rgb("+g.r+","+g.g+","+g.b+")"));var f=new p({color:g||new L([255,255,255]),showTransparencySlider:!1,showRecentColors:!1,required:!1});(new e({label:this.nls.GenerateForms.ColorPicker.SelectColor,style:"width:185px",dropDown:f})).placeAt(a,"last").startup();var h=(new D({name:b.name,value:b.defaultValue,style:"display:none;"})).placeAt(a,"last");f.on("color-change",function(b){x.set(a,"background","rgb("+f.color.r+","+f.color.g+","+
f.color.b+")");h.set("value",(f.color.r/255).toFixed(3)+","+(f.color.g/255).toFixed(3)+","+(f.color.b/255).toFixed(3))})},_generateContainer:function(b,d,a){var e=m.create("li",{"class":"fmeportal-formitem"});b=m.create("div",{"class":"fmeportal-caption",innerHTML:b.description});var p=m.create("div",{"class":"fmeportal-element"});m.place(e,this._formList,"last");d&&A.hide(e);if(a)return e;m.place(b,e,"last");m.place(p,e,"last");return p},_generateUpload:function(b,d){var a=this._generateContainer(b,
d,!0),e=new B({settings:this.options.settings,repository:this._repository,workspace:this._workspace,parameter:{name:b.name,description:b.description}});this._activeFileUploads.push(e);e.placeAt(a,"last")},_convertMultilineText:function(b,d,a){if(b===this.options.settings.fme.geometry.parameter)return d;b="";return b=a?d?d.replaceAll("\x3cspace\x3e"," ").replaceAll("\x3clf\x3e","\n").replaceAll("\x3cu00e5\x3e","\u00e5").replaceAll("\x3cu00f6\x3e","\u00f6").replaceAll("\x3cu00e4\x3e","\u00e4").replaceAll("\x3cu00c5\x3e",
"\u00c5").replaceAll("\x3cu00c4\x3e","\u00c4").replaceAll("\x3cu00d6\x3e","\u00d6"):"":d?d.replaceAll(" ","\x3cspace\x3e").replaceAll("\n","\x3clf\x3e").replaceAll("\u00e5","\x3cu00e5\x3e").replaceAll("\u00f6","\x3cu00f6\x3e").replaceAll("\u00e4","\x3cu00e4\x3e").replaceAll("\u00c5","\x3cu00c5\x3e").replaceAll("\u00c4","\x3cu00c4\x3e").replaceAll("\u00d6","\x3cu00d6\x3e"):""},_decodeUnicode:function(b){var d=b.match(/<u\s*\w.*?>/g);c.forEach(d,a.hitch(this,function(a){var d;d=a.replace("\x3c","\\").replace("\x3e",
"");d=decodeURIComponent(JSON.parse('"'+d+'"'));b=b.replaceAll(a,d)}));return b}})})},"app/FMEPortal/FileUpload":function(){define("require dojo/_base/declare dojo/_base/lang dojo/_base/array dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/on dojo/text!./templates/file-upload.html dojo/dom-class dojo/dom-construct dojo/query ./Utils dojo/i18n!./nls/resources dojox/form/uploader/FileList dijit/registry dijit/ConfirmDialog dijit/form/CheckBox dijit/form/Form dojox/form/Uploader dijit/form/Button dijit/form/TextBox".split(" "),
function(n,a,c,k,t,u,v,l,w,r,x,m,y,h,z,C,E,A){return a("FmePortal-FileUpload",[t,u,v],{templateString:w,widgetsInTemplate:!0,constructor:function(a){this.options=a;this.nls=h;this.loaderAnim=n.toUrl("./images/loader.gif");this.set("paramname",this.options.parameter.name);this.set("description",this.options.parameter.description);this.set("disabledFiles",this.options.settings.fme.uploadSettings.disabledFiles);FMEServer.getSession(this.options.repository,this.options.workspace,c.hitch(this,function(a){a.serviceResponse.files&&
(this.set("session",a.serviceResponse.session),this.set("path",a.serviceResponse.files.folder[0].path))}))},postCreate:function(){this.inherited(arguments);this._uploader.startup();(new z({uploader:this._uploader,headerFilename:this.nls.FileUpload.FileList.Name,headerFilesize:this.nls.FileUpload.FileList.Size,headerType:this.nls.FileUpload.FileList.Type})).placeAt(this._fileList).startup();this.own(l(this._uploader,"change",c.hitch(this,function(a){a&&0<a.length?y.show(this._fileContainer):y.hide(this._fileContainer)})),
l(this._submit,"click",c.hitch(this,function(){y.show(this._uploading);var a=m("input",this._uploader.domNode)[0];FMEServer.dataUpload(this.options.repository,this.options.workspace,a,this.get("session"),c.hitch(this,this._processUploadedFiles))})))},_processUploadedFiles:function(a){this._uploadedFilesList&&0<this._uploadedFilesList.length&&k.forEach(this._uploadedFilesList,function(a){a&&a.destroy()});this._uploadedFilesList=[];if(void 0!==a.serviceResponse){this._uploadedFiles.innerHTML="";this._files=
a.serviceResponse.files.file;var c,h;for(file in this._files)a=this._getLabelString(this._files[file]),a=x.toDom("\x3clabel\x3e "+a+"\x3c/label\x3e"),x.place(a,this._uploadedFiles,"last"),c=new A({name:this._files[file].name}),h=/\.[0-9a-z]{1,5}$/i,h=this._files[file].name.toLowerCase().match(h)[0],-1!==this.disabledFiles.indexOf(h)&&(c.set("disabled",!0),r.add(a,"fmeportal-disabled")),this._uploadedFilesList.push(c),c.placeAt(a,"first"),c.startup();y.show(this._uploadedContainer)}y.hide(this._uploading)},
getValues:function(){var a=[];this._uploadedFilesList&&0<this._uploadedFilesList.length&&k.forEach(this._uploadedFilesList,c.hitch(this,function(c){c.get("checked")&&k.forEach(this._files,function(h){c.get("name")===h.name&&a.push(h)})}));if(0<a.length)return{files:a}},_getLabelString:function(a){return a.name.replace("\u00c3\u00a4","\u00e4").replace("\u00c3\u00a5","\u00e5").replace("\u00c3\u00b6","\u00f6").replace("\u00c3\u2026","\u00c5").replace("\u00c3\u201e","\u00c4").replace("\u00c3\u2013","\u00d6")},
destroy:function(){this.inherited(arguments)}})})},"app/FMEPortal/Status":function(){define("require dojo/_base/declare dojo/_base/lang dojo/_base/array dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/Evented dojo/text!./templates/status.html dojo/i18n!./nls/resources dojo/topic ./Utils".split(" "),function(n,a,c,k,t,u,v,l,w,r,x,m){return a("FmePortal-Status",[t,u,v,l],{templateString:w,widgetsInTemplate:!0,options:{},constructor:function(a){this.options=c.mixin(this.options,
a);this.nls=r;this._apiUrl=this.options.settings.fme.server.url;this._restVersion=this.options.settings.fme.server.version;this._addTopics()},postCreate:function(){this.inherited(arguments);this.options.settings.adminMode||(m.hide(this._running),m.hide(this._queued));m.hide(this.domNode)},_addTopics:function(){this.own(x.subscribe("FMEPortal/orderStart",c.hitch(this,function(){this._statusInterval=setInterval(c.hitch(this,this._queryFmeServerStatus),2E3)})),x.subscribe("FMEPortal/orderComplete",c.hitch(this,
function(){clearInterval(this._statusInterval);m.hide(this.domNode)})))},_requestCompleteRunning:!0,_requestCompleteQueued:!0,_queryFmeServerStatus:function(){this._requestCompleteRunning&&(this._requestCompleteRunning=!1,this._customRequest("transformations/jobs/running","GET",c.hitch(this,function(a){a&&a.message&&a.message.contains("Unauthorized request")?(clearInterval(this._statusInterval),this.destroy()):(m.show(this.domNode),this._requestCompleteRunning=!0,0===a.length?(this._runningTitle.innerHTML=
this.nls.Status.RunningJobs+" (0)",this._running.innerHTML=this.nls.Status.NoRunningJobs):(this._runningTitle.innerHTML=this.nls.Status.RunningJobs+" ("+a.length+")",this._running.innerHTML="",k.forEach(a,c.hitch(this,function(a){this._running.innerHTML+="\x3cimg src\x3d'"+n.toUrl("./images/loader.gif")+"' /\x3e "+a.id+", "+a.request.workspacePath.split("/")[1]+" ("+a.request.subsection+"), \x3cb\x3e"+a.engineName+"\x3c/b\x3e\x3cbr /\x3e"}))))}),{detail:"high",limit:-1,offset:-1}));this._requestCompleteQueued&&
(this._requestCompleteQueued=!1,this._customRequest("transformations/jobs/queued","GET",c.hitch(this,function(a){a&&a.message&&a.message.contains("Unauthorized request")?(clearInterval(this._statusInterval),this.destroy()):(m.show(this.domNode),this._requestCompleteQueued=!0,0===a.length?(this._queuedTitle.innerHTML=this.nls.Status.QueuedJobs+" (0)",this._queued.innerHTML=this.nls.Status.NoQueuedJobs):(this._queuedTitle.innerHTML=this.nls.Status.QueuedJobs+" ("+a.length+")",this._queued.innerHTML=
"",k.forEach(a,c.hitch(this,function(a){this._queued.innerHTML+=a.id+", "+a.request.workspacePath.split("/")[1]+" ("+a.request.subsection+"), \x3cb\x3e"+a.engineName+"\x3c/b\x3e\x3cbr /\x3e"}))))}),{detail:"high",limit:-1,offset:-1}))},_customRequest:function(a,c,k,l,m){a&&c&&k&&FMEServer.customRequest(this._apiUrl+"/fmerest/"+this._restVersion+"/"+a,c,k,l,m||"application/json")},destroy:function(){this.inherited(arguments)}})})},"app/FMEPortal/Toolbar":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/event dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/Evented dojo/on dojo/text!./templates/toolbar.html dojo/topic ./Utils ./Toolbar/Buffer dojo/i18n!./nls/resources esri/toolbars/draw esri/toolbars/edit esri/layers/GraphicsLayer esri/symbols/SimpleMarkerSymbol esri/symbols/SimpleLineSymbol esri/symbols/SimpleFillSymbol esri/Color esri/graphic esri/geometry/Polygon esri/geometry/Extent esri/geometry/webMercatorUtils esri/tasks/AreasAndLengthsParameters esri/tasks/BufferParameters esri/tasks/GeometryService esri/config dijit/Menu dijit/form/Button dijit/form/NumberTextBox dijit/form/Form dijit/Fieldset".split(" "),
function(n,a,c,k,t,u,v,l,w,r,x,m,y,h,z,C,E,A,F,B,D,q,J,K,H,I,G,g,f){return n("FmePortal-Toolbar",[k,t,u,v],{templateString:w,widgetsInTemplate:!0,baseClass:"fmeportal-toolbar",_activeColor:null,_bufferColor:null,constructor:function(e){this.options=e;this.nls=y;this._activeColor=this.options.settings.map.drawColor;this._bufferColor=this.options.settings.map.bufferColor;g.defaults.geometryService=new G(this.options.settings.map.geometryService);this._toolbar=new h(this.options.map);this._editor=new z(this.options.map);
this.own(l(this._toolbar,"draw-end",a.hitch(this,this._addToMap)),l(this._editor,"deactivate",a.hitch(this,function(a){this._refreshArea(a.graphic.geometry);this._setGeometryParameter(a.graphic.geometry)})),l(this._editor,"activate",a.hitch(this,function(a){this._drawnArea.innerHTML=this.nls.Toolbar.Edit})));this._createBufferLayer();this._createDrawLayer();this._createGraphicsToolsMenu();this._addTopics()},_createBufferLayer:function(){this._bufferGraphicsLayer=new C;this.options.map.addLayer(this._bufferGraphicsLayer)},
_createDrawLayer:function(){this._drawGraphicsLayer=new C;this.options.map.addLayer(this._drawGraphicsLayer);this.own(l(this._drawGraphicsLayer,"mouse-over",a.hitch(this,function(a){this._selectedGraphic=a.graphic;this._graphicToolsMenu.bindDomNode(a.graphic.getDojoShape().getNode())})),l(this._drawGraphicsLayer,"mouse-out",a.hitch(this,function(a){this._graphicToolsMenu.unBindDomNode(a.graphic.getDojoShape().getNode())})),l(this._drawGraphicsLayer,"click",a.hitch(this,function(a){this._drawingEnabled||
(c.stop(a),this._editingEnabled?(this._editingEnabled=!1,this._editor.deactivate()):(this._editor.activate(z.MOVE|z.SCALE|z.EDIT_VERTICES|z.ROTATE|z.EDIT_TEXT,a.graphic),this._editingEnabled=!0))})),l(this.options.map,"click",a.hitch(this,function(){this._editingEnabled&&(this._editingEnabled=!1,this._editor.deactivate())})))},_addTopics:function(){r.subscribe("FMEPortal/buffer",a.hitch(this,function(e){if(0===this._bufferGraphicsLayer.graphics.length){var c=new F;c.setColor(new B(this._bufferColor));
this._bufferGraphicsLayer.add(new D(this._drawGraphicsLayer.graphics[0].geometry,c))}c=new I;c.distances=[e];c.outSpatialReference=this.options.map.spatialReference;c.unit=G.UNIT_METER;c.unionResults=!0;c.geometries=[this._bufferGraphicsLayer.graphics[0].geometry];g.defaults.geometryService.buffer(c,a.hitch(this,function(a){this._drawGraphicsLayer.clear();this._addToMap({geometry:a[0]})}))}));r.subscribe("FMEPortal/showGeometryTools",a.hitch(this,function(){x.show(this._geometryTools);x.hide(this._noTools)}));
r.subscribe("FMEPortal/hideGeometryTools",a.hitch(this,function(){x.hide(this._geometryTools);x.show(this._noTools)}))},_addToMap:function(a){var c,g;this._toolbar.deactivate();switch(a.geometry.type){case "point":case "multipoint":g=a.geometry;c=new E;c.setColor(new B(this._activeColor));break;case "polyline":g=a.geometry;c=new A;c.setWidth(5);c.setColor(new B(this._activeColor));break;case "polygon":g=a.geometry;c=new F;c.setColor(new B(this._activeColor));break;case "extent":g=a.geometry,c=new F,
c.setColor(new B(this._activeColor)),a=new q(this.options.map.spatialReference),a.addRing([[g.xmin,g.ymin],[g.xmin,g.ymax],[g.xmax,g.ymax],[g.xmax,g.ymin],[g.xmin,g.ymin]]),g=a}c=new D(g,c);this._drawGraphicsLayer.add(c);this._refreshArea(g);this._setGeometryParameter(g);this._drawingEnabled=!1},_refreshArea:function(c){var f=new H;f.lengthUnit=g.defaults.geometryService.UNIT_METERS;f.areaUnit=g.defaults.geometryService.UNIT_SQUARE_METERS;f.calculationType="preserveShape";f.polygons=[c];g.defaults.geometryService.areasAndLengths(f).then(a.hitch(this,
function(c){this._drawnArea.innerHTML=a.replace(this.nls.Toolbar.Area,{area:"\x3cb\x3e"+(c.areas[0]/1E4).toLocaleString()+"\x3c/b\x3e"})}));this._xmin.set("value",Math.round(c.getExtent().xmin));this._ymin.set("value",Math.round(c.getExtent().ymin));this._xmax.set("value",Math.round(c.getExtent().xmax));this._ymax.set("value",Math.round(c.getExtent().ymax))},_setGeometryParameter:function(a){if("esrijson"===this.options.settings.fme.geometry.format)a=JSON.stringify(a.toJson()),this.emit("geometry-change",
a);else if("geojson"===this.options.settings.fme.geometry.format){var c=K.webMercatorToGeographic(a).rings[0],g,b,d;a="POLYGON((";for(g=0;g<c.length;g++)b=c[g][1],d=c[g][0],a+=d+" "+b+",";a=a.substr(0,a.length-1);this.emit("geometry-change",a+"))")}},postCreate:function(){this.inherited(arguments);this.own(l(this._drawPolygon,"click",a.hitch(this,function(){this._startDrawing("POLYGON")})),l(this._drawExtent,"click",a.hitch(this,function(){this._startDrawing("EXTENT")})),l(this._clearMap,"click",
a.hitch(this,function(){this._xmin.set("value",0);this._ymin.set("value",0);this._xmax.set("value",0);this._ymax.set("value",0);this._drawGraphicsLayer.clear();this._bufferGraphicsLayer.clear();this._jsonGeometry=null;this._drawnArea.innerHTML="";this._toolbar.deactivate();this._editor.deactivate();this.emit("geometry-change")})),l(this._inputExtent,"click",a.hitch(this,function(){x.toggle(this._inputExtentArea.domNode);this._inputExtentArea.resize()})),l(this._drawInputExtent,"click",a.hitch(this,
function(){if(this._inputForm.validate()){var a=this._xmin.get("value"),c=this._ymin.get("value"),g=this._xmax.get("value"),b=this._ymax.get("value");a&&c&&g&&b&&a<g&&c<b?(this._drawGraphicsLayer.clear(),this._bufferGraphicsLayer.clear(),a=new J({xmin:a,ymin:c,xmax:g,ymax:b,spatialReference:this.options.map.spatialReference}),this._addToMap({geometry:a}),this.options.map.setExtent(a.expand(1.2),!0)):r.publish("FMEPortal/alert",this.nls.Toolbar.InputExtent.Title,this.nls.Toolbar.InputExtent.InvalidCoordinates)}else r.publish("FMEPortal/alert",
this.nls.Toolbar.InputExtent.Title,this.nls.Toolbar.InputExtent.InvalidCoordinates)})))},_startDrawing:function(a){this._xmin.set("value",0);this._ymin.set("value",0);this._xmax.set("value",0);this._ymax.set("value",0);this._drawGraphicsLayer.clear();this._bufferGraphicsLayer.clear();this._toolbar.activate(h[a]);this._drawingEnabled=!0},_createGraphicsToolsMenu:function(){this._graphicToolsMenu=new f({});var a=new m({label:this.nls.Toolbar.Buffer.SetBuffer});this._graphicToolsMenu.addChild(a);this._graphicToolsMenu.startup()},
destroy:function(){this.inherited(arguments)}})})},"app/FMEPortal/Toolbar/Buffer":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-style dijit/PopupMenuItem dijit/TooltipDialog ./BufferInput".split(" "),function(n,a,c,k,t,u){return n(k,{constructor:function(c){c=c||{};a.mixin(this,c)},postCreate:function(){this.inherited(arguments);var a=new u;this.popup=new t({style:"width:200px;",content:a});c.set(this.popup.connectorNode,"display","none");this.popup.startup()}})})},"app/FMEPortal/Toolbar/BufferInput":function(){define("dojo/_base/declare dojo/_base/lang dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/Evented dojo/text!../templates/buffer.html dojo/i18n!../nls/resources dojo/topic dijit/form/NumberTextBox dijit/form/Button".split(" "),
function(n,a,c,k,t,u,v,l,w){return n("FmePortal-Buffer-Input",[c,k,t,u],{templateString:v,widgetsInTemplate:!0,options:{},constructor:function(c){this.options=a.mixin(this.options,c);this.nls=l},postCreate:function(){this._setBuffer.on("click",a.hitch(this,function(){(0>this._bufferVal.get("value")||0<this._bufferVal.get("value"))&&w.publish("FMEPortal/buffer",this._bufferVal.get("value"))}))},destroy:function(){this.inherited(arguments)}})})},"url:app/FMEPortal/templates/wrapper.html":'\x3cdiv\x3e\n    \x3ch2\x3e${options.settings.fme.general.title}\x3c/h2\x3e\n    \x3cdiv class\x3d"${baseClass}-about" data-dojo-attach-point\x3d"_about"\x3e\n        \x3ci class\x3d"material-icons"\x3e\x26#xE88E;\x3c/i\x3e ${nls.Widget.About}\n    \x3c/div\x3e\n\n    \x3cdiv data-dojo-attach-point\x3d"_loginWrapper"\x3e\n        \x3cdiv data-dojo-attach-point\x3d"_loginStatus"\x3e\x3c/div\x3e\n    \x3c/div\x3e\n\n    \x3cdiv data-dojo-attach-point\x3d"_stepOne" style\x3d"display:none;"\x3e\n        \x3ch3\x3e${nls.Widget.Step1.Title}\x3c/h3\x3e\n        \x3cdiv data-dojo-attach-point\x3d"_toolbar"\x3e\x3c/div\x3e\n    \x3c/div\x3e\n\n    \x3cdiv data-dojo-attach-point\x3d"_stepTwo" style\x3d"display:none;"\x3e\n        \x3ch3\x3e${nls.Widget.Step2.Title}\x3c/h3\x3e\n        \x3cdiv data-dojo-attach-point\x3d"_repositorySelector" style\x3d"display:none;"\x3e${nls.Widget.Step2.Repository} \x3c/div\x3e\n        \x3cdiv data-dojo-attach-point\x3d"_workspaceSelector" style\x3d"display:none;"\x3e${nls.Widget.Step2.Workspace} \x3c/div\x3e\n        \x3cdiv data-dojo-attach-point\x3d"_formContent"\x3e\n            \x3cdiv data-dojo-attach-point\x3d"_loadingParams" class\x3d"${baseClass}-loading"\x3e\n                \x3cimg src\x3d"${loaderAnim}" /\x3e ${nls.Widget.Step2.LoadingParams}\n            \x3c/div\x3e\n        \x3c/div\x3e\n        \x3cdiv data-dojo-attach-point\x3d"_loadingContent" class\x3d"${baseClass}-loading"\x3e\n            \x3cimg src\x3d"${loaderAnim}" /\x3e${nls.Widget.Step2.LoadingContent}\n        \x3c/div\x3e\n    \x3c/div\x3e\n\n    \x3cdiv data-dojo-attach-point\x3d"_stepThree" style\x3d"display:none;"\x3e\n        \x3ch3\x3e${nls.Widget.Step3.Title}\x3c/h3\x3e\n        \x3cdiv data-dojo-attach-point\x3d"_resultLoading" class\x3d"${baseClass}-loading"\x3e\n            \x3cimg src\x3d"${loaderAnim}" /\x3e ${nls.Widget.Step3.LoadingResult}\n        \x3c/div\x3e\n        \x3cdiv data-dojo-attach-point\x3d"_resetResultCount" style\x3d"display:none;" class\x3d"${baseClass}-result-clear"\x3e\n            \x3ci class\x3d"material-icons" style\x3d"vertical-align:middle;font-size: 20px;"\x3e\x26#xE872;\x3c/i\x3e ${nls.Widget.Step3.ClearResult}\n        \x3c/div\x3e\n        \x3cdiv class\x3d"${baseClass}-results" data-dojo-attach-point\x3d"_resultView"\x3e\n            \n        \x3c/div\x3e\n        \x3cspan data-dojo-attach-point\x3d"_noResults"\x3e${nls.Widget.Step3.NoTranslationResults}\x3c/span\x3e\n    \x3c/div\x3e\n\x3c/div\x3e',
"url:app/FMEPortal/templates/login.html":'\x3cdiv\x3e\r\n    \x3cdiv data-dojo-type\x3d"dijit/layout/TabContainer" data-dojo-props\x3d"controllerWidget: \'dijit.layout.TabController\', doLayout:false" data-dojo-attach-point\x3d"_tabContainer"\x3e\r\n        \x3cdiv data-dojo-type\x3d"dijit/layout/ContentPane" data-dojo-props\x3d"label: \'${nls.Login.Tabs.Credentials.Title}\', title: \'${nls.Login.Tabs.Credentials.Title}\'"\x3e\r\n            \x3cspan\x3e${nls.Login.Tabs.Credentials.Info}\x3c/span\x3e\r\n            \x3cdiv data-dojo-type\x3d"dijit/form/Form" data-dojo-attach-point\x3d"_fmeLoginForm"\x3e\r\n                \x3cbr /\x3e\r\n                \x3ctable\x3e\r\n                    \x3ctr\x3e\r\n                        \x3ctd\x3e${nls.Login.Tabs.Credentials.Username}:\x3c/td\x3e\r\n                        \x3ctd\x3e\x3cdiv data-dojo-type\x3d"dijit/form/ValidationTextBox" name\x3d"username" required\x3d"true" data-dojo-attach-point\x3d"_fmeUsername"\x3e\x3c/div\x3e\x3c/td\x3e\r\n                    \x3c/tr\x3e\r\n                    \x3ctr\x3e\r\n                        \x3ctd\x3e${nls.Login.Tabs.Credentials.Password}:\x3c/td\x3e\r\n                        \x3ctd\x3e\x3cdiv data-dojo-type\x3d"dijit/form/ValidationTextBox" name\x3d"password" required\x3d"true" data-dojo-props\x3d"type:\'password\'" data-dojo-attach-point\x3d"_fmePassword"\x3e\x3c/div\x3e\x3c/td\x3e\r\n                    \x3c/tr\x3e\r\n                \x3c/table\x3e\r\n                \x3cdiv data-dojo-type\x3d"dijit/form/Button" data-dojo-attach-point\x3d"_login"\x3e${nls.Login.Button}\x3c/div\x3e\r\n                \x3cdiv data-dojo-attach-point\x3d"_loginStatus"\x3e\x3c/div\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv data-dojo-type\x3d"dijit/layout/ContentPane" data-dojo-attach-point\x3d"_tokenTab" data-dojo-props\x3d"label: \'${nls.Login.Tabs.Token.Title}\', title: \'${nls.Login.Tabs.Token.Title}\'"\x3e\r\n            \x3cspan\x3e${nls.Login.Tabs.Token.Info}\x3c/span\x3e\r\n            \x3cdiv data-dojo-type\x3d"dijit/form/Form" data-dojo-attach-point\x3d"_fmeTokenForm"\x3e\r\n                \x3cbr /\x3e\r\n                \x3ctable\x3e\r\n                    \x3ctr\x3e\r\n                        \x3ctd\x3e${nls.Login.Tabs.Token.Token}:\x3c/td\x3e\r\n                        \x3ctd\x3e\x3cdiv data-dojo-type\x3d"dijit/form/ValidationTextBox" name\x3d"token" required\x3d"true" data-dojo-attach-point\x3d"_fmeToken" data-dojo-props\x3d"value: \'${options.settings.fme.server.token.token}\'"\x3e\x3c/div\x3e\x3c/td\x3e\r\n                    \x3c/tr\x3e\r\n                \x3c/table\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv data-dojo-type\x3d"dijit/form/Button" data-dojo-attach-point\x3d"_tokenLogin"\x3e${nls.Login.Button}\x3c/div\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"_tokenStatus"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv data-dojo-type\x3d"dijit/layout/ContentPane" data-dojo-attach-point\x3d"_settingsTab" data-dojo-props\x3d"label: \'${nls.Login.Tabs.Settings.Title}\', title: \'${nls.Login.Tabs.Settings.Title}\'"\x3e\r\n            \x3cspan\x3e${nls.Login.Tabs.Settings.Info}\x3c/span\x3e\r\n            \x3cbr /\x3e\r\n            \x3ctable\x3e\r\n                \x3ctr\x3e\r\n                    \x3ctd\x3e${nls.Login.Tabs.Settings.ServerUrl}:\x3c/td\x3e\r\n                    \x3ctd\x3e\x3cdiv data-dojo-type\x3d"dijit/form/ValidationTextBox" required\x3d"true" data-dojo-props\x3d"value: \'${options.settings.fme.server.url}\'" data-dojo-attach-point\x3d"_serverUrl"\x3e\x3c/div\x3e\x3c/td\x3e\r\n                \x3c/tr\x3e\r\n                \x3ctr\x3e\r\n                    \x3ctd\x3e\x3c/td\x3e\r\n                    \x3ctd\x3e${nls.Login.Tabs.Settings.AdminMode.Info}\x3c/td\x3e\r\n                \x3c/tr\x3e\r\n                \x3ctr\x3e\r\n                    \x3ctd\x3e${nls.Login.Tabs.Settings.AdminMode.Label}:\x3c/td\x3e\r\n                    \x3ctd\x3e\x3cinput data-dojo-type\x3d"dijit/form/CheckBox" data-dojo-attach-point\x3d"_adminMode" /\x3e\x3c/td\x3e\r\n                \x3c/tr\x3e\r\n            \x3c/table\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:app/FMEPortal/templates/workspace-info.html":'\x3cdiv\x3e\n    \x3ch3\x3e${options.name}\x3c/h3\x3e\n    \x3ctable class\x3d"${baseClass}-infotable"\x3e\n        \x3ctr\x3e\n            \x3ctd\x3e${nls.WorkspaceInfo.Title}\x3c/td\x3e\n            \x3ctd\x3e${options.title}\x3c/td\x3e\n        \x3c/tr\x3e\n        \x3ctr\x3e\n            \x3ctd\x3e${nls.WorkspaceInfo.Build}:\x3c/td\x3e\n            \x3ctd\x3e${options.buildNumber}\x3c/td\x3e\n        \x3c/tr\x3e\n        \x3ctr\x3e\n            \x3ctd\x3e${nls.WorkspaceInfo.Filesize}:\x3c/td\x3e\n            \x3ctd\x3e${options.fileSize}\x3c/td\x3e\n        \x3c/tr\x3e\n        \x3ctr\x3e\n            \x3ctd\x3e${nls.WorkspaceInfo.Category}:\x3c/td\x3e\n            \x3ctd\x3e${options.category}\x3c/td\x3e\n        \x3c/tr\x3e\n        \x3ctr\x3e\n            \x3ctd\x3e${nls.WorkspaceInfo.Description}:\x3c/td\x3e\n            \x3ctd\x3e${!options.description}\x3c/td\x3e\n        \x3c/tr\x3e\n        \x3ctr\x3e\n            \x3ctd\x3e${nls.WorkspaceInfo.History}:\x3c/td\x3e\n            \x3ctd\x3e${!options.history}\x3c/td\x3e\n        \x3c/tr\x3e\n        \x3ctr\x3e\n            \x3ctd\x3e${nls.WorkspaceInfo.LastSaveBuild}:\x3c/td\x3e\n            \x3ctd\x3e${options.lastSaveBuild}\x3c/td\x3e\n        \x3c/tr\x3e\n        \x3ctr\x3e\n            \x3ctd\x3e${nls.WorkspaceInfo.LastSaveDate}:\x3c/td\x3e\n            \x3ctd\x3e${options.lastSaveDate}\x3c/td\x3e\n        \x3c/tr\x3e\n        \x3ctr\x3e\n            \x3ctd\x3e${nls.WorkspaceInfo.Resources}:\x3c/td\x3e\n            \x3ctd\x3e${!options.resources}\x3c/td\x3e\n        \x3c/tr\x3e\n        \x3ctr\x3e\n            \x3ctd\x3e${nls.WorkspaceInfo.Services}:\x3c/td\x3e\n            \x3ctd\x3e${!options.services}\x3c/td\x3e\n        \x3c/tr\x3e\n        \x3ctr\x3e\n            \x3ctd\x3e${nls.WorkspaceInfo.Type}:\x3c/td\x3e\n            \x3ctd\x3e${options.type}\x3c/td\x3e\n        \x3c/tr\x3e\n        \x3ctr\x3e\n            \x3ctd\x3e${nls.WorkspaceInfo.Usage}:\x3c/td\x3e\n            \x3ctd\x3e${!options.usage}\x3c/td\x3e\n        \x3c/tr\x3e\n    \x3c/table\x3e\n\x3c/div\x3e',
"url:app/FMEPortal/templates/workspace-form.html":'\x3cdiv\x3e\n    \x3ch4 data-dojo-attach-point\x3d"_title"\x3e${!title}\x3c/h4\x3e\n    \x3cdiv class\x3d"fmeportal-help" style\x3d"display:none" data-dojo-attach-point\x3d"_description"\x3e${!description}\x3c/div\x3e\n    \x3cdiv data-dojo-type\x3d"dijit/form/Form" class\x3d"fmeportal-form" data-dojo-attach-point\x3d"_form"\x3e\n        \x3cul data-dojo-attach-point\x3d"_formList"\x3e\n\n        \x3c/ul\x3e\n    \x3c/div\x3e\n    \x3cdiv class\x3d"fmeportal-orderbutton" data-dojo-type\x3d"dijit/form/Button" data-dojo-attach-point\x3d"_order"\x3e${nls.GenerateForms.ButtonOrder}\x3c/div\x3e\n    \x3cdiv data-dojo-attach-point\x3d"_serviceType" style\x3d"display:none;float:right;"\x3e\x3c/div\x3e\n\x3c/div\x3e',
"url:app/FMEPortal/templates/result.html":'\x3cdiv class\x3d"fmeportal-result fmeportal-{resultClass}"\x3e\n    \x3cdiv\x3e\x3ci class\x3d\'material-icons\'\x3e{icon}\x3c/i\x3e {date}\x3c/div\x3e\n    \x3cdiv class\x3d"fmeportal-result-ws"\x3e{workspace}\x3c/div\x3e\n    \x3cdiv\x3e{message}\x3c/div\x3e\n\x3c/div\x3e',"url:app/FMEPortal/templates/file-upload.html":'\x3cdiv\x3e\r\n    \x3cfieldset\x3e\r\n        \x3clegend\x3e${nls.FileUpload.AddFiles} \x3cb\x3e${description}\x3c/b\x3e\x3c/legend\x3e\r\n        \x3cinput data-dojo-attach-point\x3d"_uploader" name\x3d"uploadedfile" multiple\x3d"true" type\x3d"file" data-dojo-type\x3d"dojox/form/Uploader" data-dojo-props\x3d"label: \'${nls.FileUpload.SelectFiles}\'"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"_fileUrl" style\x3d"display:inline-block;"\x3e\x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"_urlFilelist"\x3e\x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"_fileContainer" style\x3d"display:none;"\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"_fileList"\x3e\x3c/div\x3e\r\n            \x3cinput data-dojo-attach-point\x3d"_submit" type\x3d"button" label\x3d"${nls.FileUpload.Button}" data-dojo-type\x3d"dijit/form/Button"\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"_uploading" style\x3d"display:none;"\x3e\r\n                \x3cimg src\x3d"${loaderAnim}" /\x3e ${nls.FileUpload.Uploading}\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"_uploadedContainer" style\x3d"display:none;"\x3e\r\n            \x3ch3\x3e${nls.FileUpload.SelectTranslationFiles}\x3c/h3\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"_uploadedFiles" class\x3d"fmeportal-uploadedFiles"\x3e${nls.FileUpload.NoFiles}\x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/fieldset\x3e\r\n\x3c/div\x3e\r\n',
"url:app/FMEPortal/templates/status.html":'\x3cdiv class\x3d"fmeportal-status"\x3e\n    \x3ch3\x3e${nls.Status.Title}\x3c/h3\x3e\n    \x3ch4 data-dojo-attach-point\x3d"_runningTitle"\x3e${nls.Status.RunningJobs}\x3c/h4\x3e\n    \x3cdiv data-dojo-attach-point\x3d"_running"\x3e\x3c/div\x3e\n    \x3ch4 data-dojo-attach-point\x3d"_queuedTitle"\x3e${nls.Status.QueuedJobs}\x3c/h4\x3e\n    \x3cdiv data-dojo-attach-point\x3d"_queued"\x3e\x3c/div\x3e\n\x3c/div\x3e',"url:app/FMEPortal/css/styles.css":{cssText:'body{font-family:"Avenir Next W01","Avenir Next","Avenir","Helvetica Neue","Helvetica","Arial",sans-serif;}.fmeportal h2{font-size:200%;}.fmeportal h3{padding:5px;margin-left:-10px;margin-right:-10px;}.fmeportal h4{display:block;margin-top:10px;margin-bottom:0;font-size:115%;cursor:pointer;}.fmeportal h4 .material-icons{vertical-align:middle;}.fmeportal-loading{display:none;margin:5px;font-weight:bold;}.fmeportal-result .material-icons{vertical-align:middle;}.fmeportal-result-clear{position:absolute;right:20px;margin-top:-25px;color:gray;cursor:pointer;}.fmeportal-about{cursor:pointer;position:absolute;top:30px;right:20px;}.fmeportal-result-ws{font-weight:normal;}.fmeportal-error{color:#505050;padding:5px;background:#e5e5e5;margin-bottom:5px;-moz-box-shadow:0px 0px 7px 0px rgba(0,0,0,0.75);box-shadow:0px 0px 7px 0px rgba(0,0,0,0.5);}.fmeportal-error i, .fmeportal-error a{color:red;}.fmeportal-success{color:#505050;padding:5px;background:#e5e5e5;margin-bottom:5px;-moz-box-shadow:0px 0px 7px 0px rgba(0,0,0,0.75);box-shadow:0px 0px 7px 0px rgba(0,0,0,0.5);}.fmeportal-success i, .fmeportal-success a{color:#1a70a6;text-decoration:none;}.fmeportal-disabled{opacity:0.4;}.fmeportal fieldset{width:335px;border:1px solid #dcebf5;margin:0;}.fmeportal-denied{padding:15px;font-size:110%;color:#a41616;font-weight:bold;}.fmeportal-help{padding:5px;margin-top:10px;background:#dceffa;color:black;}.fmeportal-infotable{border-collapse:collapse;}.fmeportal-infotable, .fmeportal-infotable td{border:1px solid #d7d5d5;padding:8px;}.fmeportal-infotable tr:first-child{width:200px;}.fmeportal-form ul{list-style-type:none;padding:0 10px;}.fmeportal-form li{margin:5px 0;min-height:30px;}.fmeportal-formitem \x3e div{display:inline-block;vertical-align:top;}.fmeportal-caption{width:145px;padding-right:5px;}.fmeportal-uploadedFiles label{display:block;margin:3px;word-break:break-all;}.fmeportal-status{position:absolute;top:10px;right:10px;background:#fff;z-index:10;width:400px;box-shadow:0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 1px 5px 0 rgba(0, 0, 0, 0.12);padding:20px;}.fmeportal-area{display:block;font-size:120%;margin:5px;}.fmeportal-toolbar .material-icons{color:#4c4c4c;}.fmeportal-orderbutton .dijitButtonNode{font-size:120%;width:100px;}.fmeportal .dojoxCheckedMultiSelectWrapper{border:0 !important;}.fmeportal .dijitButtonContents{outline:none;}.fmeportal .material-icons{vertical-align:middle;cursor:pointer;}.fmeportal .dijitTabContainer .dijitDisabled{display:none;}.fmeportal .dojoxColorPicker{background:#f5f5f5;padding:10px;border:1px solid #d8d8d8;}.fmeportal .dojoxUploaderFileName{word-break:break-all;}',
xCss:'.fmeportal-infotable tr:first-childwidth\x3d;;{/0font-family:"Avenir Next W01","Avenir Next","Avenir","Helvetica Neue","Helvetica","Arial",sans-serif;font-family\x3d;}font-size\x3d;margin-right\x3d;cursor\x3d;vertical-align\x3d;font-weight\x3d;vertical-align\x3d;right\x3d;font-weight\x3d;{/10-moz-box-shadow:0px 0px 7px 0px rgba(0,0,0,0.75);box-shadow:0px 0px 7px 0px rgba(0,0,0,0.5);box-shadow\x3d;}color\x3d;{/12-moz-box-shadow:0px 0px 7px 0px rgba(0,0,0,0.75);box-shadow:0px 0px 7px 0px rgba(0,0,0,0.5);box-shadow\x3d;}text-decoration\x3d;opacity\x3d;margin\x3d;font-weight\x3d;color\x3d;border-collapse\x3d;padding\x3d;width\x3d;padding\x3d;min-height\x3d;vertical-align\x3d;padding-right\x3d;word-break\x3d;{/26box-shadow:0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 1px 5px 0 rgba(0, 0, 0, 0.12);padding\x3d;}margin\x3d;color\x3d;width\x3d;border\x3d;outline\x3d;cursor\x3d;display\x3d;border\x3d;word-break\x3d;'},
"url:app/FMEPortal/templates/toolbar.html":'\x3cdiv\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"_geometryTools" style\x3d"display:none;"\x3e\r\n        \x3cdiv data-dojo-type\x3d"dijit/form/Button" data-dojo-attach-point\x3d"_drawPolygon"\x3e\x3ci class\x3d"material-icons"\x3e\x26#xE3C9;\x3c/i\x3e\x3c/div\x3e\r\n        \x3cdiv data-dojo-type\x3d"dijit/form/Button" data-dojo-attach-point\x3d"_drawExtent"\x3e\x3ci class\x3d"material-icons"\x3e\x26#xE25E;\x3c/i\x3e\x3c/div\x3e\r\n        \x3cdiv data-dojo-type\x3d"dijit/form/Button" data-dojo-attach-point\x3d"_clearMap"\x3e\x3ci class\x3d"material-icons"\x3e\x26#xE872;\x3c/i\x3e\x3c/div\x3e\r\n        \x3cdiv data-dojo-type\x3d"dijit/form/Button" data-dojo-attach-point\x3d"_inputExtent"\x3e\x3ci class\x3d"material-icons"\x3e\x26#xE56B;\x3c/i\x3e Coordinates\x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"_drawnArea"\x3e\x3c/div\x3e\r\n        \x3cfieldset data-dojo-attach-point\x3d"_inputExtentArea" class\x3d\'smart-fme-inputextent\' data-dojo-type\x3d"dijit/Fieldset" data-dojo-props\x3d"toggleable:false, style:\'margin-top: 15px; display:none;\'"\x3e\r\n            \x3clegend\x3e${nls.Toolbar.InputExtent.Title}:\x3c/legend\x3e\r\n            \x3cdiv data-dojo-type\x3d"dijit/form/Form" data-dojo-attach-point\x3d"_inputForm"\x3e\r\n                \x3ctable\x3e\r\n                    \x3ctr\x3e\r\n                        \x3ctd\x3e\r\n                            ${nls.Toolbar.InputExtent.xmin}:\r\n                        \x3c/td\x3e\r\n                        \x3ctd\x3e\r\n                            \x3cdiv data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-attach-point\x3d"_xmin" data-dojo-props\x3d"value: 0, invalidMessage: \'${nls.Toolbar.InputExtent.Validation.Coordinates}\', placeholder: \'${nls.Toolbar.InputExtent.Input} ${nls.Toolbar.InputExtent.xmin}\', style: \'width:110px\'"\x3e\x3c/div\x3e\r\n                        \x3c/td\x3e\r\n                        \x3ctd\x3e\r\n                            ${nls.Toolbar.InputExtent.xmax}:\r\n                        \x3c/td\x3e\r\n                        \x3ctd\x3e\r\n                            \x3cdiv data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-attach-point\x3d"_xmax" data-dojo-props\x3d"value: 0, invalidMessage: \'${nls.Toolbar.InputExtent.Validation.Coordinates}\', placeholder: \'${nls.Toolbar.InputExtent.Input} ${nls.Toolbar.InputExtent.xmax}\', style: \'width:110px\'"\x3e\x3c/div\x3e\r\n                        \x3c/td\x3e\r\n                    \x3c/tr\x3e\r\n                    \x3ctr\x3e\r\n                        \x3ctd\x3e\r\n                            ${nls.Toolbar.InputExtent.ymin}:\r\n                        \x3c/td\x3e\r\n                        \x3ctd\x3e\r\n                            \x3cdiv data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-attach-point\x3d"_ymin" data-dojo-props\x3d"value: 0, invalidMessage: \'${nls.Toolbar.InputExtent.Validation.Coordinates}\', placeholder: \'${nls.Toolbar.InputExtent.Input} ${nls.Toolbar.InputExtent.ymin}\', style: \'width:110px\'"\x3e\x3c/div\x3e\r\n                        \x3c/td\x3e\r\n                        \x3ctd\x3e\r\n                            ${nls.Toolbar.InputExtent.ymax}:\r\n                        \x3c/td\x3e\r\n                        \x3ctd\x3e\r\n                            \x3cdiv data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-attach-point\x3d"_ymax" data-dojo-props\x3d"value: 0, invalidMessage: \'${nls.Toolbar.InputExtent.Validation.Coordinates}\', placeholder: \'${nls.Toolbar.InputExtent.Input} ${nls.Toolbar.InputExtent.ymax}\', style: \'width:110px\'"\x3e\x3c/div\x3e\r\n                        \x3c/td\x3e\r\n                    \x3c/tr\x3e\r\n                \x3c/table\x3e\r\n                \x3cdiv data-dojo-type\x3d"dijit/form/Button" data-dojo-props\x3d"style:\'float: right;margin-right: 15px;\'" data-dojo-attach-point\x3d"_drawInputExtent"\x3e${nls.Toolbar.InputExtent.ButtonDraw}\x3c/div\x3e\r\n            \x3c/div\x3e\r\n        \x3c/fieldset\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"_noTools"\x3e\r\n        ${nls.Toolbar.Message}\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n\r\n',
"url:app/FMEPortal/templates/buffer.html":'\x3cdiv\x3e\n    \x3cdiv style\x3d"display:inline-block;width:75px;" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-props\x3d"value: 0" data-dojo-attach-point\x3d"_bufferVal"\x3e\n        \n    \x3c/div\x3e\n    \x3cdiv style\x3d"display:inline-block" data-dojo-type\x3d"dijit/form/Button" data-dojo-attach-point\x3d"_setBuffer"\x3e\n        ${nls.Toolbar.Buffer.UseBuffer}\n    \x3c/div\x3e\n\x3c/div\x3e',"*now":function(n){n(['dojo/i18n!*preload*app/nls/FMEPortal*["ar","ca","cs","da","de","el","en-gb","en-us","es-es","fi-fi","fr-fr","he-il","hu","it-it","ja-jp","ko-kr","nl-nl","nb","pl","pt-br","pt-pt","ru","sk","sl","th","tr","zh-tw","zh-cn"]'])},
"*noref":1}});
define("app/FMEPortal","require dojo/_base/declare dojo/_base/lang dojo/_base/array dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/Evented dojo/on dojo/Deferred dojo/promise/all dojo/text!./FMEPortal/templates/wrapper.html dojo/dom-construct dojo/topic dojo/Stateful dijit/registry dijit/form/Select dijit/form/Button dijit/Dialog dojo/data/ObjectStore dojo/store/Memory ./FMEPortal/Utils ./FMEPortal/Login ./FMEPortal/WorkspaceInfo ./FMEPortal/GenerateForms ./FMEPortal/Status dojo/i18n!./FMEPortal/nls/resources xstyle/css!./FMEPortal/css/styles.css".split(" "),function(n,
a,c,k,t,u,v,l,w,r,x,m,y,h,z,C,E,A,F,B,D,q,J,K,H,I,G){return a("FmePortal-Widget",[t,u,v,l,z],{templateString:m,widgetsInTemplate:!0,baseClass:"fmeportal",_eventHandles:[],_resultCount:0,constructor:function(a){this.options=a;this.nls=G;this.loaderAnim=n.toUrl("./FMEPortal/images/loader.gif");String.prototype.replaceAll=function(a,c){return this.replace(new RegExp(a,"g"),c)};String.prototype.contains=function(a){return-1!=this.indexOf(a)};this._addTopics()},_addTopics:function(){h.subscribe("FMEPortal/orderStart",
c.hitch(this,function(a){q.show(this._resultLoading)}));h.subscribe("FMEPortal/orderComplete",c.hitch(this,function(a){q.hide(this._resultLoading);this.set("_resultCount",this.get("_resultCount")+1);y.place(a,this._resultView,"first")}));h.subscribe("FMEPortal/showLogin",c.hitch(this,function(){h.publish("FMEPortal/alert",this.options.settings.fme.general.title,this.nls.Login.Messages.Expired);q.hide(this._loadingParams);this._resultView.innerHTML="";this._removeExistingToken();this._logoutButton.destroy();
this._loginStatus.innerHTML="";this._showLogin()}));h.subscribe("FMEPortal/alert",c.hitch(this,function(a,c){var e=new F({title:a,content:c,autofocus:!1,hide:function(){e.destroy()}});e.show()}))},postCreate:function(){this.inherited(arguments);var a=this._getExistingToken();a&&a.token&&a.server?(this.options.settings.fme.server.adminMode=a.adminMode,this.options.settings.fme.server.url=a.server,FMEServer.init({server:this.options.settings.fme.server.url,token:a.token}),this._testExistingToken().then(c.hitch(this,
function(c){c?(this._updateLoginStatus(a.username),this._startFmePortal(this.options.settings.fme.server.adminMode)):this._showLogin()}))):this.options.settings.fme.server.token.autoLogin?(FMEServer.init({server:this.options.settings.fme.server.url,token:this.options.settings.fme.server.token.token||"12345"}),this._testExistingToken().then(c.hitch(this,function(a){a?this._startFmePortal(this.options.settings.fme.server.adminMode):this._showLogin()}))):(FMEServer.init({server:this.options.settings.fme.server.url,
token:"111"}),this._showLogin());this.watch("_resultCount",c.hitch(this,function(a,c,g){0<g?(q.show(this._resetResultCount),q.hide(this._noResults)):(q.hide(this._resetResultCount),q.show(this._noResults))}));this.own(w(this._resetResultCount,"click",c.hitch(this,function(){this.set("_resultCount",0);this._resultView.innerHTML=""})),w(this._about,"click",c.hitch(this,function(){h.publish("FMEPortal/alert",this.nls.Widget.About+" "+this.options.settings.fme.general.title,this.options.settings.fme.general.about)})))},
_showLogin:function(){var a=(new J(this.options)).placeAt(this._loginWrapper,"first");a.startup();a.on("login",c.hitch(this,function(f,e){c.mixin(this.options.settings.fme.server,e);FMEServer.init({server:this.options.settings.fme.server.url,token:"111"});FMEServer.generateToken(encodeURIComponent(f.username),encodeURIComponent(f.password),this.options.settings.fme.server.token.time,this.options.settings.fme.server.token.unit,c.hitch(this,function(e){e.contains("Authentication failed")?a.setLoginStatus(this.nls.Login.Messages.BadLogin):
""===e?a.setLoginStatus(c.replace(this.nls.Login.Messages.NoAccess,{url:this.options.settings.fme.server.url})):e.contains("Both user ID and password need to be specified")?a.setLoginStatus(this.nls.Login.Messages.BadLogin):(a.destroy(),this._updateLoginStatus(f.username),FMEServer.init({server:this.options.settings.fme.server.url,token:e}),this._saveToken(e,f.username),this._startFmePortal(this.options.settings.fme.server.adminMode))}))}));a.on("tokenLogin",c.hitch(this,function(f,e){c.mixin(this.options.settings.fme.server,
e);FMEServer.init({server:this.options.settings.fme.server.url,token:f.token});this._testExistingToken().then(c.hitch(this,function(c){c?(a.destroy(),this._updateLoginStatus(),this._saveToken(f.token,"token-user"),this._startFmePortal(this.options.settings.fme.server.adminMode)):a.setTokenStatus(this.nls.Login.Messages.BadToken)}))}))},_updateLoginStatus:function(a){this._loginStatus.innerHTML=a?this.nls.Login.SignedInAs+" \x3cb\x3e"+a+"\x3c/b\x3e. ":this.nls.Login.TokenSignIn+". ";this._logoutButton=
(new A({label:this.nls.Login.ButtonSignout,onClick:c.hitch(this,function(){this._removeExistingToken();this._logoutButton.destroy();this._loginStatus.innerHTML="";this._showLogin()})})).placeAt(this._loginStatus,"last")},_saveToken:function(a,c){localStorage.setItem("fmeportal-"+this.options.settings.fme.general.id+"-token",JSON.stringify({token:a,username:c,server:this.options.settings.fme.server.url,adminMode:this.options.settings.fme.server.adminMode}))},_getExistingToken:function(){var a=localStorage.getItem("fmeportal-"+
this.options.settings.fme.general.id+"-token");try{return a?JSON.parse(a):null}catch(c){return null}},_removeExistingToken:function(){FMEServer.init({server:this.options.settings.fme.server.url,token:"12345"});k.forEach([this._stepOne,this._stepTwo,this._stepThree,this._workspaceSelector,this._repositorySelector],function(a){q.hide(a)});this._rsSelect?this._rsSelect.destroy():null;this._wsSelect?this._wsSelect.destroy():null;this._activeForm?this._activeForm.destroy():null;localStorage.removeItem("fmeportal-"+
this.options.settings.fme.general.id+"-token")},_testExistingToken:function(){var a=new r;FMEServer.getResources(c.hitch(this,function(c){c&&c.message&&c.message.contains("Authentication failed")||""===c?a.resolve(!1):a.resolve(!0)}));return a},_startFmePortal:function(a){C.byId("fmeportal-details")&&C.byId("fmeportal-details").destroy();k.forEach([this._stepOne,this._stepTwo,this._stepThree],function(a){q.show(a)});this.options.map?n(["./FMEPortal/Toolbar"],c.hitch(this,function(a){this._activeToolbar&&
this._activeToolbar.destroy();this._activeToolbar=(new a(this.options)).placeAt(this._toolbar);this.own(w(this._activeToolbar,"geometry-change",c.hitch(this,function(a){this._activeForm&&this._activeForm.setGeometry(a)})))})):this._toolbar.innerHTML=this.nls.Toolbar.NoMap;k.forEach(this._eventHandles,function(a){a.remove()});a?(q.show(this._loadingContent),this._customRequest("repositories","GET",c.hitch(this,this._adminModeSelects))):this._customRequest("repositories","GET",c.hitch(this,this._userModeSelects));
this._portalStatus=(new I(this.options)).placeAt(this.options.map.root,"last")},_adminModeSelects:function(a){if(a&&0<a.length){var f=[],e=[],p=[];k.forEach(a,c.hitch(this,function(a){var b=new r;p.push(b);e.push({id:a.name,label:a.name});this._customRequest("repositories/"+a.name+"/items","GET",function(c){k.forEach(c,function(b){f.push({id:b.name,label:b.name,repo:a.name})});b.resolve()})}));x(p).then(c.hitch(this,function(){this._wsSelect&&this._wsSelect.destroy();this._wsSelect=(new E({store:new B({objectStore:new D({data:f})}),
style:"width:250px;"})).placeAt(this._workspaceSelector,"last");q.show(this._workspaceSelector);this._wsSelect.startup();this._wsSelect.set("query",{repo:e[0].id});this._rsSelect&&this._rsSelect.destroy();this._rsSelect=(new E({store:new B({objectStore:new D({data:e})}),style:"width:250px;"})).placeAt(this._repositorySelector,"last");q.show(this._repositorySelector);this._rsSelect.startup();this._eventHandles.push(this._rsSelect.on("change",c.hitch(this,function(){var a=this._rsSelect.get("value");
this._wsSelect.set("query",{repo:a});var b=this._wsSelect.get("value");this._buildFmeForm({repo:a,id:b})})));this._eventHandles.push(this._wsSelect.on("change",c.hitch(this,function(){var a=this._rsSelect.get("value"),b=this._wsSelect.get("value");this._buildFmeForm({repo:a,id:b})})));q.hide(this._loadingContent)}))}else q.hide(this._loadingContent),h.publish("FMEPortal/alert",this.options.settings.fme.general.title,this.nls.Login.Messages.NoPermission)},_userModeSelects:function(a){var f=[];k.forEach(a,
function(a){f.push(a.name)});var e=[];e.push({id:-1,label:"-- "+this.nls.Widget.Step2.ChooseWorkspace+" -- ",disabled:!0});k.forEach(this.options.settings.fme.includedWorkspaces,function(a){e.push({id:a.workspace,label:a.title,repo:a.repository,description:a.description,service:a.service,permission:-1!==f.indexOf(a.repository)})});this._wsSelect&&this._wsSelect.destroy();this._wsSelect=(new E({store:new B({objectStore:new D({data:e})}),style:"width:250px;"})).placeAt(this._workspaceSelector,"last");
q.show(this._workspaceSelector);this._wsSelect.startup();this._eventHandles.push(this._wsSelect.on("change",c.hitch(this,function(){this._wsSelect.set("disabled",!0);var a=this._wsSelect.get("store"),e=this._wsSelect.get("value");this._permissionMessage?y.destroy(this._permissionMessage):null;-1!==e?a.get(e).then(c.hitch(this,function(a){a.permission?this._buildFmeForm(a):(this._activeForm?this._activeForm.destroy():null,this._permissionMessage=y.create("div",{"class":"fmeportal-denied",innerHTML:this.nls.Login.Messages.NoWorkspacePermission}),
y.place(this._permissionMessage,this._formContent,"last"),this._wsSelect.set("disabled",!1))})):(h.publish("FMEPortal/hideGeometryTools"),this._activeForm?this._activeForm.destroy():null,this._activeForm=null,this._wsSelect.set("disabled",!1))})))},_buildFmeForm:function(a){h.publish("FMEPortal/hideGeometryTools");this._activeForm&&this._activeForm.destroy();q.show(this._loadingParams);FMEServer.getWorkspaceParameters(a.repo,a.id,c.hitch(this,function(f){f&&"Authentication failed: Failed to login"===
f.message?(h.publish("FMEPortal/alert",this.options.settings.fme.general.title,this.nls.Login.Messages.Expired),this._removeExistingToken(),this._logoutButton.destroy(),this._loginStatus.innerHTML="",this._showLogin()):(k.forEach(f,c.hitch(this,function(a){k.forEach(a.listOptions,c.hitch(this,function(a){a.caption=this._decodeUnicode(a.caption)}))})),q.hide(this._loadingParams),this._activeForm=(new H({options:this.options,parameters:f,ws:a})).placeAt(this._formContent,"last"),this.options.settings.fme.server.adminMode?
(C.byId("fmeportal-details")&&C.byId("fmeportal-details").destroy(),this._customRequest("repositories/"+a.repo+"/items/"+a.id,"GET",c.hitch(this,function(e){this._detailsButton=(new A({id:"fmeportal-details",label:this.nls.WorkspaceInfo.ButtonLabel,style:"margin:5px;",onClick:c.hitch(this,function(){this._workspaceInfo=new K(e);h.publish("FMEPortal/alert",this.nls.WorkspaceInfo.Label+" "+a.id,this._workspaceInfo)})})).placeAt(this._formContent,"last").startup();this._wsSelect.set("disabled",!1);this._activeForm.addServiceSelect(e)}),
"detail\x3dhigh")):this._wsSelect.set("disabled",!1))}))},_customRequest:function(a,c,e,h,k){a&&c&&e&&FMEServer.customRequest(this.options.settings.fme.server.url+"/fmerest/"+this.options.settings.fme.server.version+"/"+a,c,e,h,k||"application/json")},_decodeUnicode:function(a){var f=a.match(/<u\s*\w.*?>/g);k.forEach(f,c.hitch(this,function(c){var f;f=c.replace("\x3c","\\").replace("\x3e","");f=decodeURIComponent(JSON.parse('"'+f+'"'));a=a.replaceAll(c,f)}));return a},destroy:function(){this.inherited(arguments)}})});